<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bloom - Cherry Blossom Dither Effect</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #111111;
            overflow: hidden;
        }

        #canvas {
            position: fixed;
            inset: 0;
            z-index: 1;
        }

        .content {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 40px;
            pointer-events: none;
        }

        h1 {
            font-family: Georgia, 'Times New Roman', serif;
            font-size: 72px;
            font-weight: 500;
            margin-bottom: 20px;
            line-height: 1.1;
            color: #111;
        }

        .pink {
            color: #F25AA2;
            font-style: italic;
        }

        .controls {
            position: fixed;
            bottom: 40px;
            left: 40px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #E5E5E5;
            backdrop-filter: blur(10px);
            z-index: 50;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            pointer-events: auto;
        }

        .control-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        input[type="range"] {
            width: 200px;
        }

        .value {
            display: inline-block;
            margin-left: 10px;
            font-weight: 600;
            color: #F25AA2;
        }

        button {
            margin-top: 10px;
            padding: 8px 16px;
            background: #F25AA2;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 12px;
        }

        button:hover {
            background: #d94a8f;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="content">
        <h1>
            The Intelligent<br>
            <span class="pink">Execution Layer</span>
        </h1>
    </div>

    <div class="controls">
        <h4 style="margin-bottom: 15px; font-size: 14px;">Cherry Blossom Dither</h4>
        
        <div class="control-group">
            <label>Petal Count</label>
            <input type="range" id="petal-count" min="20" max="150" value="60" step="5">
            <span class="value" id="count-value">60</span>
        </div>

        <div class="control-group">
            <label>Dither Density</label>
            <input type="range" id="dither-density" min="10" max="100" value="50" step="5">
            <span class="value" id="density-value">50%</span>
        </div>

        <div class="control-group">
            <label>Fall Speed</label>
            <input type="range" id="fall-speed" min="10" max="100" value="30" step="5">
            <span class="value" id="speed-value">30</span>
        </div>

        <button onclick="resetDefaults()">Reset Defaults</button>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let petalCount = 60;
        let ditherDensity = 0.5;
        let fallSpeed = 0.3;

        // Resize canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // ASCII characters for dithering (sparse to dense)
        const DITHER_CHARS = ' ·∴∵⋅•∙⊙○◦◯◌';
        const PETAL_CHARS = '✿❀✾✽❁❃❊❉';

        // Cherry blossom petal class
        class CherryPetal {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * -100 - 100;
                this.size = Math.random() * 20 + 15;
                this.rotation = Math.random() * Math.PI * 2;
                this.rotationSpeed = (Math.random() - 0.5) * 0.05;
                this.fallSpeed = (Math.random() * 0.5 + 0.5) * fallSpeed;
                this.sway = Math.random() * 2;
                this.swaySpeed = Math.random() * 0.02 + 0.01;
                this.opacity = Math.random() * 0.5 + 0.5;
                
                // Color variations for cherry blossoms
                const colors = [
                    '#F25AA2', // Pink
                    '#FFB6D9', // Light pink
                    '#FF69B4', // Hot pink
                    '#FFC0CB', // Pale pink
                    '#FF91AF', // Medium pink
                ];
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                this.y += this.fallSpeed;
                this.x += Math.sin(this.y * this.swaySpeed) * this.sway;
                this.rotation += this.rotationSpeed;

                // Reset when off screen
                if (this.y > canvas.height + 50) {
                    this.reset();
                }
            }

            // Draw petal with dither effect
            drawDithered() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                ctx.globalAlpha = this.opacity;

                // Draw petal shape with ASCII dither
                const petalSize = this.size;
                const points = 5; // 5-pointed star shape for cherry blossom
                
                // Fill petal with dithered ASCII characters
                for (let i = 0; i < petalSize * ditherDensity; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const radius = Math.random() * petalSize;
                    const px = Math.cos(angle) * radius;
                    const py = Math.sin(angle) * radius * 0.7; // Slightly oval

                    // Choose ASCII character based on distance from center
                    const distanceRatio = radius / petalSize;
                    const charIndex = Math.floor(distanceRatio * (DITHER_CHARS.length - 1));
                    const char = DITHER_CHARS[charIndex];

                    ctx.fillStyle = this.color;
                    ctx.font = '8px monospace';
                    ctx.fillText(char, px, py);
                }

                // Add center detail
                ctx.fillStyle = '#FFD700'; // Gold center
                ctx.font = '6px monospace';
                for (let i = 0; i < 5; i++) {
                    const angle = (i / 5) * Math.PI * 2;
                    const px = Math.cos(angle) * 2;
                    const py = Math.sin(angle) * 2;
                    ctx.fillText('·', px, py);
                }

                ctx.restore();
            }

            // Draw petal outline with ASCII
            drawOutline() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                ctx.globalAlpha = this.opacity * 0.8;

                const petalSize = this.size;
                const segments = 20;

                ctx.font = `${this.size * 0.8}px monospace`;
                ctx.fillStyle = this.color;

                // Draw petal using Unicode flower characters
                const petalChar = PETAL_CHARS[Math.floor(Math.random() * PETAL_CHARS.length)];
                ctx.fillText(petalChar, -this.size * 0.4, this.size * 0.4);

                ctx.restore();
            }

            draw() {
                // Combine outline and dither for best effect
                this.drawOutline();
                this.drawDithered();
            }
        }

        // Create petals
        let petals = [];
        function createPetals() {
            petals = [];
            for (let i = 0; i < petalCount; i++) {
                petals.push(new CherryPetal());
            }
        }
        createPetals();

        // Background dither texture
        function drawBackgroundDither() {
            const cellSize = 60;
            ctx.globalAlpha = 0.05;
            ctx.font = '10px monospace';

            for (let y = 0; y < canvas.height; y += cellSize) {
                for (let x = 0; x < canvas.width; x += cellSize) {
                    if (Math.random() < 0.3) {
                        const char = DITHER_CHARS[Math.floor(Math.random() * DITHER_CHARS.length)];
                        ctx.fillStyle = '#F25AA2';
                        ctx.fillText(char, x, y);
                    }
                }
            }
        }

        // Animation loop
        function animate() {
            // Clear with slight fade for trails
            ctx.fillStyle = 'rgba(250, 250, 250, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw background dither
            drawBackgroundDither();

            // Update and draw petals
            ctx.globalAlpha = 1;
            petals.forEach(petal => {
                petal.update();
                petal.draw();
            });

            requestAnimationFrame(animate);
        }

        animate();

        // Controls
        document.getElementById('petal-count').addEventListener('input', (e) => {
            petalCount = parseInt(e.target.value);
            document.getElementById('count-value').textContent = petalCount;
            createPetals();
        });

        document.getElementById('dither-density').addEventListener('input', (e) => {
            ditherDensity = e.target.value / 100;
            document.getElementById('density-value').textContent = e.target.value + '%';
        });

        document.getElementById('fall-speed').addEventListener('input', (e) => {
            fallSpeed = e.target.value / 100;
            document.getElementById('speed-value').textContent = e.target.value;
            petals.forEach(p => p.fallSpeed = (Math.random() * 0.5 + 0.5) * fallSpeed);
        });

        function resetDefaults() {
            document.getElementById('petal-count').value = 60;
            document.getElementById('dither-density').value = 50;
            document.getElementById('fall-speed').value = 30;
            petalCount = 60;
            ditherDensity = 0.5;
            fallSpeed = 0.3;
            document.getElementById('count-value').textContent = '60';
            document.getElementById('density-value').textContent = '50%';
            document.getElementById('speed-value').textContent = '30';
            createPetals();
        }

        // Mouse interaction - petals avoid cursor
        canvas.addEventListener('mousemove', (e) => {
            petals.forEach(petal => {
                const dx = e.clientX - petal.x;
                const dy = e.clientY - petal.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < 100) {
                    const force = (100 - distance) / 100;
                    petal.x -= (dx / distance) * force * 5;
                    petal.y -= (dy / distance) * force * 5;
                }
            });
        });
    </script>
</body>
</html>
