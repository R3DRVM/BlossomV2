# Blossom Agent - Local Environment Template
# Copy this to .env.local and fill in your values
# DO NOT commit .env.local to git

# ============================================
# Execution Mode
# ============================================
EXECUTION_MODE=eth_testnet
EXECUTION_AUTH_MODE=session

# ============================================
# Access Gate (Whitelist Testing)
# ============================================
# Optional: Comma-separated access codes (or auto-generate 30 on startup)
WHITELIST_ACCESS_CODES=
# Required for admin endpoints (generating/revoking codes)
ADMIN_KEY=REDACTED

# ============================================
# ETH Testnet Contracts (Sepolia)
# ============================================
# ExecutionRouter contract address (Router V3 - deployed Jan 30, 2026)
EXECUTION_ROUTER_ADDRESS=0x07634e6946035533465a30397e08d9D1c641a6ee
# Uniswap V3 Swap Adapter
UNISWAP_V3_ADAPTER_ADDRESS=0xab1497f8D174914052FFD6F849F7D681Bf70635B
# WETH Wrap Adapter (Route 2)
WETH_WRAP_ADAPTER_ADDRESS=0x43b98D6BA8C71d343b65Da1E438AcC7e11B95f87
# ERC20 Pull Adapter (required for demo swap)
ERC20_PULL_ADAPTER_ADDRESS=0x356ab2f7e4f9D5E3b0368Ab7D85242060BF467e2
# Mock Swap Adapter (demo)
MOCK_SWAP_ADAPTER_ADDRESS=0x6c6809A085212f2d1bf96eb4f83119f88D7eb93c
# Token addresses
WETH_ADDRESS_SEPOLIA=0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9
REDACTED_ADDRESS_SEPOLIA=0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238

# ============================================
# RPC & Relayer (with Failover)
# ============================================
# PRIMARY RPC URL - Alchemy recommended (better rate limits)
# Sign up at https://alchemy.com for free API key
ETH_TESTNET_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_KEY

# FALLBACK RPC URLs (optional, but recommended)
# The system will automatically failover on 429/rate-limit errors
# You can set individual providers OR a comma-separated list

# Option 1: Individual provider URLs (auto-collected as fallbacks)
ALCHEMY_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_KEY
INFURA_RPC_URL=https://sepolia.infura.io/v3/YOUR_KEY

# Option 2: Explicit comma-separated fallback list
# ETH_RPC_FALLBACK_URLS=https://sepolia.infura.io/v3/KEY1,https://rpc.sepolia.org

# NOTE: Public RPC (https://rpc.sepolia.org) is always added as last resort
# Failover order: Primary -> ETH_RPC_FALLBACK_URLS -> ALCHEMY -> INFURA -> Public

# Relayer wallet private key (must have Sepolia ETH for gas)
RELAYER_PRIVATE_KEY=0x...

# ============================================
# LLM Configuration
# ============================================
# Options: gemini, openai, anthropic, stub
BLOSSOM_MODEL_PROVIDER=gemini
# Gemini API key (required if provider=gemini)
BLOSSOM_GEMINI_API_KEY=<YOUR_GEMINI_API_KEY>
# OpenAI API key (required if provider=openai)
BLOSSOM_OPENAI_API_KEY=
# Anthropic API key (required if provider=anthropic)
BLOSSOM_ANTHROPIC_API_KEY=

# ============================================
# Server Configuration
# ============================================
# Backend port (default: 3001)
PORT=3001

# ============================================
# dFlow Integration (Intelligent Routing)
# ============================================
# Enable dFlow for routing and event markets
DFLOW_ENABLED=true
# dFlow API key (x-api-key auth header)
DFLOW_API_KEY=<YOUR_DFLOW_API_KEY>
# dFlow has TWO separate API endpoints:
DFLOW_QUOTE_API_URL=https://a.quote-api.dflow.net
DFLOW_PREDICTION_API_URL=https://prediction-markets-api.dflow.net
# Routing mode: 'dflow' uses dFlow, 'hybrid' uses 1inch, 'deterministic' uses fixed demo quotes
ROUTING_MODE=dflow

# ============================================
# Solana Execution (Devnet)
# ============================================
# REQUIRED for real Solana swap execution via Jupiter
# Generate with: npx tsx agent/scripts/solana-generate-dev-wallet.ts
# Fund via: https://faucet.solana.com
SOLANA_PRIVATE_KEY=
# Mint authority for Solana bUSDC (base58). Defaults to SOLANA_PRIVATE_KEY if set.
SOLANA_MINT_AUTHORITY_PRIVATE_KEY=
# Optional: Override devnet RPC (default: https://api.devnet.solana.com)
SOLANA_RPC_URL=https://api.devnet.solana.com
# Optional: Your wallet's public key (for reference)
SOLANA_DEVNET_PUBKEY=

# ============================================
# Solana Pricing + Routing (Devnet-safe)
# ============================================
# Pyth Hermes endpoint (optional)
PYTH_HERMES_URL=https://hermes.pyth.network
# Pyth feed IDs (optional, recommended for SOL/ETH/USDC pricing)
PYTH_SOL_USD_FEED_ID=
PYTH_ETH_USD_FEED_ID=
PYTH_USDC_USD_FEED_ID=

# Jupiter price/quote endpoints (optional)
JUPITER_PRICE_API_URL=https://price.jup.ag/v6/price
JUPITER_QUOTE_API_URL=https://quote-api.jup.ag/v6/quote
JUPITER_SWAP_API_URL=https://quote-api.jup.ag/v6/swap
# Jupiter mints (mainnet defaults; override for devnet if needed)
SOLANA_SOL_MINT=So11111111111111111111111111111111111111112
SOLANA_USDC_MINT=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
SOLANA_BUSDC_MINT=
SOLANA_BUSDC_DECIMALS=6
# Optional: vault token account for Solana bUSDC deposits
SOLANA_BUSDC_VAULT_ADDRESS=

# ============================================
# Demo Tokens + Venues (Sepolia)
# ============================================
DEMO_BUSDC_ADDRESS=0x6751001fD8207c494703C062139784abCa099bB9
DEMO_WETH_ADDRESS=0x5FB58E6E0adB7002a6E0792BE3aBE084922c9939
DEMO_SWAP_ROUTER_ADDRESS=0x658ff9f7CD82aa1703f23dfa674da86bbc40D47B
DEMO_LEND_VAULT_ADDRESS=0xBe79C09d307f0006F891c4e86464e6aBDF09AB04
DEMO_LEND_ADAPTER_ADDRESS=0xFb63255Bf7cA3B574426edf0Ea5F4a89A0a2511f
PROOF_ADAPTER_ADDRESS=0xAEb0be93B2b2E033025a14803FbB2C71B27DE66c
DEMO_PERP_ENGINE_ADDRESS=0x86B67DdBae63cB149cc15542628474667fe9EE43
DEMO_PERP_ADAPTER_ADDRESS=0x78704d0B0F5bafe84724188bd5f45A082306a390
DEMO_EVENT_ENGINE_ADDRESS=0xe09EEA1B05Cbb5e3c66418CD983e1Ffc58d4549C
DEMO_EVENT_ADAPTER_ADDRESS=0x6B83d5222eb13bFa1FB295ca9a4890854ac0a698
# Aave V3 Adapter (for real Aave Sepolia lending)
AAVE_ADAPTER_ADDRESS=0xc02D3192e1e90660636125f479B98d57B53A83c3
# Aave V3 Pool on Sepolia
AAVE_SEPOLIA_POOL_ADDRESS=0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951

# ============================================
# Hyperliquid Testnet (HIP-3 Market Creation)
# ============================================
# Enable Hyperliquid integration
HYPERLIQUID_ENABLED=false

# Hyperliquid Testnet Network
HYPERLIQUID_TESTNET_RPC_URL=https://api.hyperliquid-testnet.xyz/evm
HYPERLIQUID_TESTNET_CHAIN_ID=998

# bUSDC Minting (Hyperliquid Testnet)
# ERC20 bUSDC contract address on Hyperliquid testnet
HYPERLIQUID_BUSDC_ADDRESS=
# bUSDC decimals (default: 6)
HYPERLIQUID_BUSDC_DECIMALS=6
# Mint authority private key (defaults to HYPERLIQUID_BUILDER_PRIVATE_KEY if set)
HYPERLIQUID_MINT_AUTHORITY_PRIVATE_KEY=

# Hyperliquid API Endpoints
HYPERLIQUID_EXCHANGE_URL=https://api.hyperliquid-testnet.xyz/exchange
HYPERLIQUID_INFO_URL=https://api.hyperliquid-testnet.xyz/info

# HIP-3 Builder Configuration (SENSITIVE)
# Builder EOA address that will sign market creation transactions
HYPERLIQUID_BUILDER_ADDRESS=0x...
# Builder private key - NEVER commit real keys to git!
# In production, use AWS KMS, HashiCorp Vault, or similar secure key management
# HYPERLIQUID_BUILDER_PRIVATE_KEY=0x...

# Mock HYPE token address on testnet (for bonding in testnet mode)
HYPERLIQUID_MOCK_HYPE_ADDRESS=0x...

# Rate Limits (per-endpoint)
# Max market creations per day (default: 5)
HYPERLIQUID_RATE_LIMIT_MARKET_CREATION=5
# Max position operations per minute (default: 20)
HYPERLIQUID_RATE_LIMIT_POSITION=20
# Max quote requests per second (default: 10)
HYPERLIQUID_RATE_LIMIT_QUOTE=10

# HIP-3 Default Parameters
# Default max leverage for new markets (1-50, default: 20)
HYPERLIQUID_DEFAULT_MAX_LEVERAGE=20
# Default maker fee in basis points (default: 2 = 0.02%)
HYPERLIQUID_DEFAULT_MAKER_FEE_BPS=2
# Default taker fee in basis points (default: 5 = 0.05%)
HYPERLIQUID_DEFAULT_TAKER_FEE_BPS=5

# Minimum bond amount in HYPE (wei, default: 1M HYPE = 1000000000000000000000000)
# HYPERLIQUID_MIN_BOND_HYPE=1000000000000000000000000

# ============================================
# ERC-8004 Trustless AI Agents Configuration
# ============================================
# Feature flag to enable ERC-8004 integration
ERC8004_ENABLED=false

# Registry addresses (Sepolia testnet)
# Set these after ERC-8004 registries are deployed
ERC8004_IDENTITY_REGISTRY_SEPOLIA=
ERC8004_REPUTATION_REGISTRY_SEPOLIA=
ERC8004_VALIDATION_REGISTRY_SEPOLIA=

# Agent identity (set after registration)
# Run: npx tsx agent/scripts/register-erc8004-agent.ts
ERC8004_AGENT_ID=
ERC8004_AGENT_URI=https://api.blossom.onl/.well-known/agent-registration.json

# Automatic feedback submission for significant trades
ERC8004_AUTO_FEEDBACK=false
# Minimum USD amount to trigger feedback (default: 100)
ERC8004_FEEDBACK_MIN_USD=100

# Require capability validation before execution
ERC8004_REQUIRE_VALIDATION=false

# ============================================
# Debug (Optional)
# ============================================
# Enable execution artifact logging
DEBUG_EXECUTIONS=1

# ============================================
# Observability (Optional)
# ============================================
# Backend Sentry DSN (leave blank to disable)
SENTRY_DSN=
# Optional override (default: VERCEL_ENV / NODE_ENV)
SENTRY_ENV=
# Traces sampling (0.0 - 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1
# Stats API URL for posting execution events to dashboard (Vercel-only)
# Example: https://blossom.onl/api/stats/ingest (if configured)
STATS_API_URL=
